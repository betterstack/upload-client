{"version":3,"sources":["./dist/umd/index.js"],"names":["global","factory","exports","module","define","amd","self","UploadClient","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","errors","missing_api_key","missing_provider_id","task_already_executed","task_already_aborted","task_no_files","mismatch_length_signed_urls_and_files","internal_error","invalid_api_key","invalid_provider_id","not_enough_uploads","ServiceError","_super","code","_this","name","thrown","Error","UploadBtnTask","opts","abort","executed","start","_a","files","providerId","progress_1","signResponse","uploadedFiles","_loop_1","this_1","state_1","e_1","_b","log","check","totalBytes","reduce","file","size","loadedBytes","loadedPercent","filesBytes","map","filesLoadedBytes","filesLoadedPercent","progress","getSignedUrls","apiKey","key","acl","type","url","e_2","signedUrl","success","responseCode","error","putObject","progressCallback","bytes","xhr","status","stop","onProgress","fn","data","response","responseData","fetch","apiUrl","method","mode","cache","headers","Content-Type","JSON","stringify","json","XMLHttpRequest","onreadystatechange","readyState","upload","onprogress","lengthComputable","loaded","open","setRequestHeader","send","_i","console","isTest","setApiKey"],"mappings":"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"}