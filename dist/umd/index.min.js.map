{"version":3,"sources":["./dist/umd/index.js"],"names":["global","factory","exports","module","define","amd","self","UploadClient","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__spreadArrays","il","r","k","a","j","jl","errors","missing_api_key","missing_provider_id","task_already_executed","task_already_aborted","task_no_files","mismatch_length_signed_urls_and_files","internal_error","invalid_api_key","invalid_provider_id","not_enough_uploads","upload_aborted","upload_failed","upload_could_not_initiate","ServiceError","_super","code","_this","name","thrown","Error","UploadBtnTask","opts","abort","executed","start","_a","files","providerId","throwUploadError","progress_1","signResponse","uploadedFiles","_loop_1","this_1","state_1","e_1","_b","log","check","totalBytes","reduce","file","size","loadedBytes","loadedPercent","filesBytes","map","filesLoadedBytes","filesLoadedPercent","progress","getSignedUrls","apiKey","key","acl","type","url","e_2","signedUrl","putObject","progressCallback","bytes","xhr","responseCode","errorCode","status","stop","onProgress","fn","data","response","responseData","fetch","apiUrl","method","mode","cache","headers","Content-Type","JSON","stringify","json","XMLHttpRequest","onreadystatechange","readyState","upload","onprogress","lengthComputable","loaded","open","setRequestHeader","send","_i","console","isTest","setApiKey"],"mappings":"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"}